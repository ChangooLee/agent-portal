_format_version: "3.0"

# Kong Gateway Configuration for Single Port Architecture
# All services are accessed via BFF (port 3009) internally

services:
  # BFF Service (internal only - accessed via BFF at port 3009)
  - name: backend-proxy
    url: http://backend:3009
    plugins:
      - name: prometheus

routes:
  # BFF Route (internal only)
  - name: backend-route
    service: backend-proxy
    paths:
      - /api

# Prometheus plugin configuration
plugins:
  - name: prometheus
    enabled: true
    config:
      per_consumer: true
      status_code_metrics: true
      latency_metrics: true
      bandwidth_metrics: true
      upstream_health_metrics: true


