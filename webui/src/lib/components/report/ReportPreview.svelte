<script lang="ts">
	import type { ReportTemplate } from './types';

	export let template: ReportTemplate | null = null;
</script>

<div class="flex h-full flex-col rounded-xl border border-slate-800/50 bg-slate-900/80 p-0 shadow-xl shadow-black/20">
	<header class="flex items-center justify-between border-b border-slate-700/50 px-6 py-4">
		<div>
			<h3 class="text-lg font-semibold text-white">
				{template ? template.title : 'ë³´ê³ ì„œë¥¼ ì„ íƒí•˜ì„¸ìš”'}
			</h3>
			<p class="text-sm text-slate-400">
				{template
					? template.description
					: 'ì¢Œì¸¡ í…œí”Œë¦¿ì„ ì„ íƒí•˜ë©´ ë¯¸ë¦¬ë³´ê¸°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.'}
			</p>
		</div>
		<div class="flex items-center gap-2">
			<button
				type="button"
				class="rounded-full border border-slate-700/50 bg-slate-800/50 px-3 py-1.5 text-xs font-medium text-slate-300 shadow-sm hover:bg-slate-800/80 hover:text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500/50 transition-colors"
			>
				ë³µì‚¬
			</button>
			<button
				type="button"
				class="rounded-full bg-indigo-600 hover:bg-indigo-500 px-3.5 py-1.5 text-xs font-semibold text-white shadow-md shadow-indigo-500/30 transition hover:scale-105 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500/50"
			>
				ë‹¤ìš´ë¡œë“œ
			</button>
		</div>
	</header>

	<div class="flex-1 overflow-y-auto px-6 py-6 scrollbar-thin scrollbar-track-transparent scrollbar-thumb-indigo-500/20">
		{#if template}
			<article class="prose prose-sm max-w-none prose-invert prose-headings:text-white prose-p:text-slate-300 prose-strong:text-white prose-code:text-slate-300 prose-pre:text-slate-200 prose-blockquote:text-slate-300 prose-li:text-slate-300 prose-a:text-indigo-400 prose-table:text-slate-300">
				{@html template.previewHtml}
			</article>
		{:else}
			<div class="flex h-full flex-col items-center justify-center text-center">
				<div class="mb-4 flex h-16 w-16 items-center justify-center rounded-full border border-dashed border-slate-700/50 bg-slate-800/50">
					<span class="text-2xl">ğŸ§¾</span>
				</div>
				<p class="text-sm leading-relaxed text-slate-400">
					ì¢Œì¸¡ í…œí”Œë¦¿ì„ ì„ íƒí•˜ë©´<br />AIê°€ ìƒì„±í•œ ë³´ê³ ì„œ êµ¬ì¡°ì™€ ìƒ˜í”Œ ë‚´ìš©ì„ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
				</p>
			</div>
		{/if}
	</div>
</div>

