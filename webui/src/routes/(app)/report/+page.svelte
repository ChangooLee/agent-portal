<script lang="ts">
	import ReportTemplateList from '$lib/components/report/ReportTemplateList.svelte';
	import ReportChatPanel from '$lib/components/report/ReportChatPanel.svelte';
	import ReportPreview from '$lib/components/report/ReportPreview.svelte';
	import type { ReportTemplate } from '$lib/components/report/types';
	import { WEBUI_NAME } from '$lib/stores';

	const reportTemplates: ReportTemplate[] = [
		{
			id: 'executive-briefing',
			category: 'Executive',
			title: 'ì„ì›ìš© ì „ëµ ìš”ì•½',
			description:
				'í•µì‹¬ KPI, ì¸ì‚¬ì´íŠ¸, ì˜ì‚¬ê²°ì • í¬ì¸íŠ¸ë¥¼ 2í˜ì´ì§€ ë‚´ë¡œ ì •ë¦¬í•˜ëŠ” ì„ì›ìš© ë³´ê³ ì„œì…ë‹ˆë‹¤.',
			tags: ['KPI', 'OKR', 'Quarterly Review'],
			metrics: [
				{ label: 'ì¶”ì²œ ë¶„ëŸ‰', value: '2 pages', accent: 'primary' },
				{ label: 'í†¤', value: 'Concise' },
				{ label: 'ë¦¬ë”ì‹­ ë§Œì¡±ë„', value: '98%', accent: 'accent' }
			],
			previewHtml: `<section>
	<h2>ìš”ì•½</h2>
	<p>ì´ë²ˆ ë¶„ê¸° AI ë„ì… í”„ë¡œì íŠ¸ëŠ” ê³„íš ëŒ€ë¹„ 18% ë¹ ë¥¸ ì™„ì„±ë„ë¡œ ë§ˆê°í–ˆê³ , ì˜ˆìƒ ROIëŠ” 142%ë¡œ ìƒí–¥ ì¡°ì •ë˜ì—ˆìŠµë‹ˆë‹¤. í•µì‹¬ KPIì¸ ê³ ê° ì…€í”„ì„œë¹„ìŠ¤ ì „í™˜ìœ¨ì€ 36% ê°œì„ ë˜ë©° ëª©í‘œì¹˜ë¥¼ ì´ˆê³¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.</p>
	<ul>
		<li><strong>í•µì‹¬ í•˜ì´ë¼ì´íŠ¸</strong>: ê³ ê° ì´íƒˆë¥  -12%, ì‹ ê·œ ë¦¬ë“œ -23% â†’ +9%</li>
		<li><strong>ë¦¬ìŠ¤í¬</strong>: ë°ì´í„° ê±°ë²„ë„ŒìŠ¤ ì²´í¬ë¦¬ìŠ¤íŠ¸ 2í•­ëª© ë¯¸ì¶©ì¡± â†’ Q1 ê°œì„  ê³„íš ì œì¶œ ì˜ˆì •</li>
		<li><strong>ë‹¤ìŒ ë‹¨ê³„</strong>: â‘  AI ê¸°ë°˜ ì‚¬ë‚´ êµìœ¡ í™•ëŒ€ â‘¡ ì™¸ë¶€ íŒŒíŠ¸ë„ˆ PoC í˜‘ì—… ì¶”ì§„</li>
	</ul>
</section>
<section>
	<h3>ì£¼ìš” KPI</h3>
	<table>
		<thead>
			<tr>
				<th>KPI</th>
				<th>ëª©í‘œ</th>
				<th>ì‹¤ì </th>
				<th>ë¹„ê³ </th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>ê³ ê° ì…€í”„ì„œë¹„ìŠ¤ ë¹„ìœ¨</td>
				<td>45%</td>
				<td>53%</td>
				<td>+8pp (AI FAQ ë´‡ ì •ì°©)</td>
			</tr>
			<tr>
				<td>ìš´ì˜ ë¹„ìš© ì ˆê°</td>
				<td>-12%</td>
				<td>-15%</td>
				<td>ì˜ˆìƒ ëŒ€ë¹„ 3pp ê°œì„ </td>
			</tr>
		</tbody>
	</table>
</section>`
		},
		{
			id: 'product-update',
			category: 'Product',
			title: 'ì œí’ˆ ì—…ë°ì´íŠ¸ ë¸Œë¦¬í”„',
			description: 'ìµœê·¼ ë¦´ë¦¬ì¦ˆ, í•µì‹¬ ì§€í‘œ, í˜„í™©ì„ ì œí’ˆ ë¦¬ë”ì‹­ ê´€ì ì—ì„œ ì •ë¦¬í•©ë‹ˆë‹¤.',
			tags: ['Product', 'Release', 'Metrics'],
			metrics: [
				{ label: 'ì¶”ì²œ ë¶„ëŸ‰', value: '3 pages', accent: 'secondary' },
				{ label: 'í˜‘ì—… íŒ€', value: 'Product Â· Design Â· QA' },
				{ label: 'ì¶œì‹œ ì£¼ê¸°', value: 'ë§¤ì›”', accent: 'accent' }
			],
			previewHtml: `<section>
	<h2>ìµœê·¼ ì¶œì‹œ í˜„í™©</h2>
	<p>7ì›” ë©”ì´ì € ë¦´ë¦¬ì¦ˆì—ì„œëŠ” A/B Testing Consoleê³¼ Adaptive Workflow Builderê°€ ì •ì‹ ë°°í¬ë˜ì—ˆìŠµë‹ˆë‹¤. ë² íƒ€ ê³ ê° 42ê³³ì—ì„œ í‰ê·  27% ì—…ë¬´ íš¨ìœ¨ ê°œì„  íš¨ê³¼ë¥¼ ë³´ê³ í–ˆìŠµë‹ˆë‹¤.</p>
</section>
<section>
	<h3>ì£¼ìš” ì œí’ˆ ì§€í‘œ</h3>
	<ul>
		<li><strong>ì¼ê°„ í™œì„± ì‚¬ìš©ì</strong>: 186K â†’ 221K (â–²19%)</li>
		<li><strong>í”¼ì³ ì±„íƒë¥ </strong>: Adaptive Workflow Builder 64%</li>
		<li><strong>ì—ëŸ¬ ë ˆì´íŠ¸</strong>: 0.28%ë¡œ 0.1pp ê°ì†Œ</li>
	</ul>
</section>
<section>
	<h3>ì°¨ê¸° ìŠ¤í”„ë¦°íŠ¸ ì§‘ì¤‘ ì˜ì—­</h3>
	<ol>
		<li>Enterprise í”Œëœ ê³ ë„í™” (SSO í™•ì¥, ê°ì‚¬ ë¡œê·¸ ê°•í™”)</li>
		<li>API ë ˆì´íŠ¸ ë¦¬ë°‹ ì™„í™” ë° ëª¨ë‹ˆí„°ë§ ê°œì„ </li>
		<li>Beta Feedback ê¸°ë°˜ ì˜¨ë³´ë”© í”Œë ˆì´ë¶ ë¦¬ë¹Œë”©</li>
	</ol>
</section>`
		},
		{
			id: 'research-whitepaper',
			category: 'Research',
			title: 'ì—°êµ¬ ë°±ì„œ',
			description:
				'ì‹œì¥ ì¡°ì‚¬, ì¸ì‚¬ì´íŠ¸, ì „ëµ ì œì–¸ì„ ê²°í•©í•œ ì‹¬ì¸µ ë¶„ì„ ë³´ê³ ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.',
			tags: ['Market', 'Insight', 'Strategy'],
			metrics: [
				{ label: 'ì¶”ì²œ ë¶„ëŸ‰', value: '8 pages' },
				{ label: 'í†¤', value: 'Analytical', accent: 'primary' },
				{ label: 'ë°ì´í„° ì†ŒìŠ¤', value: '17ê°œ', accent: 'secondary' }
			],
			previewHtml: `<section>
	<h2>ì´ˆë¡</h2>
	<p>AI ê¸°ë°˜ ê¸ˆìœµ ìë™í™” ì‹œì¥ì€ 2028ë…„ê¹Œì§€ ì—°í‰ê·  24.1% ì„±ì¥í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤. êµ­ë‚´ ì£¼ìš” í”Œë ˆì´ì–´ 4ê³³ì˜ ê²½ìŸ ì „ëµì„ ë¹„êµí•´ ë¹„ìš© êµ¬ì¡°ì™€ ì§„ì… ì¥ë²½ì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.</p>
</section>
<section>
	<h3>í•µì‹¬ ì¸ì‚¬ì´íŠ¸</h3>
	<ul>
		<li>Premium ê³ ê°ì¸µì€ <em>í’ˆì§ˆ ë³´ì¦</em> ë° <em>ê°ì‚¬ ì¶”ì ì„±</em>ì„ ìµœìš°ì„  ê°€ì¹˜ë¡œ ì¸ì‹</li>
		<li>ê°€ê²© ë¯¼ê°ë„ê°€ ë†’ì€ Mid-marketì—ì„œëŠ” êµ¬ë…í˜• íŒ¨í‚¤ì§€ë³´ë‹¤ <strong>ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ìš”ê¸ˆì œ</strong> ì„ í˜¸</li>
	</ul>
</section>
<section>
	<h3>ê¶Œì¥ ì „ëµ</h3>
	<p>Hybrid ìš”ê¸ˆì œ ëª¨ë¸ ë„ì…ê³¼ í•¨ê»˜, ì»¨ì„¤íŒ… íŒŒíŠ¸ë„ˆ ë„¤íŠ¸ì›Œí¬ë¥¼ í™œìš©í•œ ê³µë™ ì„¸ì¼ì¦ˆ ì „ëµì„ ì¶”ì§„í•˜ëŠ” ê²ƒì´ íš¨ê³¼ì ì…ë‹ˆë‹¤.</p>
</section>`
		}
	];

	const heroStats = [
		{ label: 'í‰ê·  ì‘ì„± ì‹œê°„', value: '7ë¶„', hint: 'ìë™ ì´ˆì•ˆ ìƒì„± ë° ì •ë¦¬' },
		{ label: 'ì¶”ì²œ í…œí”Œë¦¿', value: '12ê°œ', hint: 'ì‚°ì—…/ëª©ì ë³„ íë ˆì´ì…˜' },
		{ label: 'PDF / Word', value: 'ì›í´ë¦­', hint: 'í¬ë§· ë³€í™˜ ì§€ì›' }
	];

	const firstTemplate = reportTemplates[0] ?? null;
	let selectedTemplateId: string | null = firstTemplate?.id ?? null;
	let selectedTemplate: ReportTemplate | null = firstTemplate;

	const handleSelectTemplate = (event: CustomEvent<{ id: string }>) => {
		selectedTemplateId = event.detail.id;
		selectedTemplate = reportTemplates.find((template) => template.id === event.detail.id) ?? null;
	};

</script>

<svelte:head>
	<title>ë³´ê³ ì„œ | {$WEBUI_NAME}</title>
</svelte:head>

<div class="min-h-full bg-gray-950 text-slate-50">
	<!-- Hero Section -->
	<div class="relative overflow-hidden border-b border-slate-800/50">
		<div class="absolute inset-0 bg-gradient-to-br from-indigo-600/5 via-transparent to-purple-600/5"></div>
		<div class="absolute inset-0 bg-[linear-gradient(rgba(99,102,241,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(99,102,241,0.03)_1px,transparent_1px)] bg-[size:64px_64px]"></div>
		
		<div class="relative px-6 py-8 text-center">
			<h1 class="text-3xl md:text-4xl font-medium mb-3 text-white">
				ğŸ“Š AI ë³´ê³ ì„œ
			</h1>
			<p class="text-base text-indigo-200/80">
				í…œí”Œë¦¿ ì„ íƒ â†’ ìš”êµ¬ì‚¬í•­ ì…ë ¥ â†’ HTML í”„ë¦¬ë·°ê¹Œì§€ í•œ í™”ë©´ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. ë³´ê³ ì„œ ì´ˆì•ˆ, ì„ì›ìš© ìš”ì•½, ì‹œì¥ ë¶„ì„ ë“± ëª©ì ì— ë§ëŠ” í…œí”Œë¦¿ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì‹œì‘í•´ë³´ì„¸ìš”.
			</p>
		</div>

		<!-- Stats Cards -->
		<div class="relative px-6 pb-8">
			<div class="grid grid-cols-3 gap-4 max-w-4xl mx-auto">
				{#each heroStats as stat}
					<div class="bg-slate-900/80 border border-slate-800/50 rounded-xl p-4 shadow-lg shadow-black/20 hover:shadow-xl hover:shadow-black/30 hover:bg-slate-800/80 hover:border-indigo-500/50 hover:-translate-y-1 transition-all duration-300">
						<div class="text-xs font-medium uppercase tracking-wide text-indigo-400 mb-1">
							{stat.label}
						</div>
						<div class="text-2xl font-medium text-white mb-1">
							{stat.value}
						</div>
						<div class="text-xs text-slate-400">{stat.hint}</div>
					</div>
				{/each}
			</div>
		</div>
	</div>

	<!-- Content Section -->
	<div class="px-6 py-8">
		<div class="flex flex-col gap-6 xl:flex-row">

			<div class="flex w-full flex-col gap-6 xl:w-[56%]">
				<ReportTemplateList
					templates={reportTemplates}
					selectedId={selectedTemplateId}
					on:select={handleSelectTemplate}
				/>

				<ReportChatPanel />
			</div>

			<div class="flex w-full flex-1">
				<ReportPreview template={selectedTemplate} />
			</div>
		</div>
	</div>
</div>

