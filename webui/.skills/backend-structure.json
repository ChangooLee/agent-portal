{
  "metadata": {
    "project": "agent-portal-webui-backend",
    "description": "Open-WebUI backend structure mapping",
    "generated": "2025-11-13",
    "version": "1.0",
    "pythonpath": "/app/backend (CRITICAL)"
  },
  "structure": {
    "root": "webui/backend",
    "module": "open_webui",
    "main": "open_webui/main.py",
    "pythonpath_required": true
  },
  "routers": [
    {"path": "/routers/chats.py", "prefix": "/chats", "tags": ["chats"]},
    {"path": "/routers/openai.py", "prefix": "/openai", "tags": ["openai"]},
    {"path": "/routers/ollama.py", "prefix": "/ollama", "tags": ["ollama"]},
    {"path": "/routers/models.py", "prefix": "/models", "tags": ["models"]},
    {"path": "/routers/users.py", "prefix": "/users", "tags": ["users"]},
    {"path": "/routers/auths.py", "prefix": "/auths", "tags": ["auths"]},
    {"path": "/routers/retrieval.py", "prefix": "/retrieval", "tags": ["retrieval"]},
    {"path": "/routers/knowledge.py", "prefix": "/knowledge", "tags": ["knowledge"]}
  ],
  "models": [
    {"file": "/models/chats.py", "table": "chat"},
    {"file": "/models/users.py", "table": "user"},
    {"file": "/models/auths.py", "table": "auth"},
    {"file": "/models/models.py", "table": "model"},
    {"file": "/models/files.py", "table": "file"},
    {"file": "/models/knowledge.py", "table": "knowledge"}
  ],
  "dev_environment": {
    "dockerfile": "webui/Dockerfile.dev",
    "script": "webui/dev-start.sh",
    "pythonpath_config": [
      {
        "location": "Dockerfile.dev",
        "line": 29,
        "content": "ENV PYTHONPATH=/app/backend:$PYTHONPATH"
      },
      {
        "location": "dev-start.sh",
        "line": 27,
        "content": "PYTHONPATH=. uvicorn open_webui.main:app ..."
      }
    ],
    "ports": {
      "backend": 8080,
      "frontend": 5173,
      "external_backend": 3000,
      "external_frontend": 3001
    }
  },
  "common_issues": [
    {
      "error": "ModuleNotFoundError: No module named 'open_webui'",
      "cause": "PYTHONPATH 미설정",
      "solution": "dev-start.sh에 PYTHONPATH=. 추가, Dockerfile.dev에 ENV PYTHONPATH 추가",
      "reference": "bug-fixes.md#2025-11-13"
    }
  ]
}

